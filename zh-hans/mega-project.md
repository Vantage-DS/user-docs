# 为大型项目准备输入数据

对于想快速重建高质量的特大型或城市级别的项目的专业用户，Altizure产品是最合适的一款三维建模产品。本文主要介绍如果要在Altizure.cn上，重建大型项目，如何更好地准备输入数据文件。

### 本文面向的用户群体 {#who}

1. 运行具有超过 20,000 个图像的项目的专业用户。
2. 倾斜摄像机和专业制图无人机的提供商。通过遵守这里描述的所需格式，您的设备的数据可以直接供给 Altizure 处理，并且 Altizure 可以加快了您的项目的处理效率。


* [必需输入图像](#necessary)
* [可选输入文件](#optional)
* [相机外部参数的pose.txt格式](#pose)
* [相机内在参数的camera.txt格式](#camera)
* [Format of group.txt](#group)

## 必需输入图像 {#necessary}

一组没有重复文件名的图像。

**注意：**

  1. 文件名的扩展名不区分大小写。因此，`DSC0000.jpg` 和 `DSC0000.JPG` 被认为是 Altizure 上的同一个文件。
  2. 至少3个有效的图像文件。
  3. 支持 JPG和PNG，但强烈建议使用 exif 中记录的相机信息的JPG文件。

## 可选输入文件 {#optional}

 * ** pose.txt** 是相机外部参数的文件。此文件仅对大规模数据集有帮助和必要。姿势信息仅用于使初始数据分区加速。

 * ** camera.txt** 是相机内在参数的文件。

 * ** group.txt** 是摄像机分组的文件。

**注意：**如果可能，我们强烈建议这些外部参数和内部参数直接写入每个图像的 **exif** 标签。

## 相机外部参数的pose.txt格式 {#pose}

文件名pose.txt

`coordinatesystem local`

`<image name><GPS><Pose>`

`<GPS> = <Latitude><Longitude><Altitude>`

`<Pose> = <Roll><Pitch><Yaw>`

第一行的 `coordinatesystem local` 表示输入的相机位置的坐标系是用户自己定义的，不是GPS坐标系(WGS84)。如果要使用GPS坐标系(WGS84)，请直接省略第一行。

`<image name>`是图像的文件名，同时保证所有图像的文件名都**不重名**。
`<GPS>`表示相机的纬度、经度、海拔坐标，在此文件中是必须申明的。
`<Pose>`表示相机的朝向，以度为单位计量，在此文件中是可以省略的。

例如，以下三个文件有效：

```
A0001.JPG 23.160948060 113.4292872428 161.6660766602 95.63634782 23.47147433 17.40054218
```

```
A0001.JPG 23.160948060 113.4292872428 161.6660766602
```

```
coordinatesystem local
```

```
A0001.JPG 1.0 1.0 1.0
```

A0001.JPG是图像文件名，`23.160948060 113.4292872428 161.6660766602`是GPS的纬度、经度、海拔坐标，`95.63634782 23.47147433 17.40054218`是相机姿态的旋转角度。第三个文件使用用户定义的局部坐标系，也是有效的。

以下两个文件无效：

```
A0001.JPG 0.9563634782 0.2347147433 0.1740054218
```

```
A0001.JPG 23.1609480602 113.4292872428 161.6660766602
A0001.JPG 23.1604395330 113.4293176755 161.5956573486
```

第一个文件只有相机朝向而没有GPS坐标。第二个文件有两个图像文件名重名（A0001.JPG）。

有关相机朝向的定义，请参阅 [https://sidvind.com/wiki/Yaw,_pitch,_roll_camera](https://sidvind.com/wiki/Yaw,_pitch,_roll_camera)

## 相机内在参数的camera.txt格式 {#camera}

文件名：camera.txt

`<image name><focal length><image center>`

`<image center> = <X0><Y0>`


`<image name>`是直接图像名称，同时保证图像的所有文件名都__不重名__。
`<focal length>`是相机的焦距，以像素为单位计量。
`<image center>`是图像的中心，以像素为单位计量。其中，图像左上角为坐标原点，水平向右为X轴，垂直向下为Y轴。

具有分辨率 5616×3744 的图像的示例相机内在文件如下所示：

```
A0001.JPG 6845.25 2806.245 1976.354
A0002.JPG 6845.25 2806.245 1976.354
```

## 相机分组的group.txt格式 {#group}

文件名：group.txt

`<image name><group ID>`

`<group ID>`是图像的分组编号，以阿拉伯数字表示（>=0）。位于同一分组的图像表示改组图像是由同一相机拍摄的。同一型号的不同相机拍摄的图片应被划分为不同分组。
这里的示例显示六张图像被分组成三组：

```
A0001.JPG 1
A0002.JPG 1
B0001.JPG 2
B0002.JPG 2
C0001.JPG 3
C0002.JPG 3
```

---

本文档最后修改于 {{ file.mtime }}


